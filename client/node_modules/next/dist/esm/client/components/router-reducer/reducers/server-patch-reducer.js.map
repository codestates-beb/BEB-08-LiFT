{"version":3,"sources":["../../../../../src/client/components/router-reducer/reducers/server-patch-reducer.ts"],"names":["createHrefFromUrl","applyRouterStatePatchToTree","isNavigatingToNewRootLayout","handleExternalUrl","applyFlightData","handleMutable","serverPatchReducer","state","action","flightData","previousTree","overrideCanonicalUrl","cache","mutable","isForCurrentTree","JSON","stringify","tree","console","log","pushRef","pendingPush","currentTree","currentCache","flightDataPath","flightSegmentPath","slice","treePatch","newTree","Error","canonicalUrl","canonicalUrlOverrideHref","undefined","patchedTree"],"mappings":"AAAA,SAASA,iBAAiB,QAAQ,yBAAyB,CAAA;AAC3D,SAASC,2BAA2B,QAAQ,qCAAqC,CAAA;AACjF,SAASC,2BAA2B,QAAQ,qCAAqC,CAAA;AAMjF,SAASC,iBAAiB,QAAQ,oBAAoB,CAAA;AACtD,SAASC,eAAe,QAAQ,sBAAsB,CAAA;AACtD,SAASC,aAAa,QAAQ,mBAAmB,CAAA;AAEjD,OAAO,SAASC,kBAAkB,CAChCC,KAA2B,EAC3BC,MAAyB,EACX;IACd,MAAM,EAAEC,UAAU,CAAA,EAAEC,YAAY,CAAA,EAAEC,oBAAoB,CAAA,EAAEC,KAAK,CAAA,EAAEC,OAAO,CAAA,EAAE,GACtEL,MAAM;IAER,MAAMM,gBAAgB,GACpBC,IAAI,CAACC,SAAS,CAACN,YAAY,CAAC,KAAKK,IAAI,CAACC,SAAS,CAACT,KAAK,CAACU,IAAI,CAAC;IAE7D,kIAAkI;IAClI,iFAAiF;IACjF,IAAI,CAACH,gBAAgB,EAAE;QACrB,iCAAiC;QACjCI,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC;QAC5B,yBAAyB;QACzB,OAAOZ,KAAK,CAAA;KACb;IAED,IAAIM,OAAO,CAACH,YAAY,EAAE;QACxB,OAAOL,aAAa,CAACE,KAAK,EAAEM,OAAO,CAAC,CAAA;KACrC;IAED,4DAA4D;IAC5D,IAAI,OAAOJ,UAAU,KAAK,QAAQ,EAAE;QAClC,OAAON,iBAAiB,CACtBI,KAAK,EACLM,OAAO,EACPJ,UAAU,EACVF,KAAK,CAACa,OAAO,CAACC,WAAW,CAC1B,CAAA;KACF;IAED,IAAIC,WAAW,GAAGf,KAAK,CAACU,IAAI;IAC5B,IAAIM,YAAY,GAAGhB,KAAK,CAACK,KAAK;IAE9B,KAAK,MAAMY,cAAc,IAAIf,UAAU,CAAE;QACvC,mFAAmF;QACnF,MAAMgB,iBAAiB,GAAGD,cAAc,CAACE,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QAErD,MAAM,CAACC,SAAS,CAAC,GAAGH,cAAc,CAACE,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QAChD,MAAME,OAAO,GAAG3B,2BAA2B,CACzC,sBAAsB;QACtB;YAAC,EAAE;eAAKwB,iBAAiB;SAAC,EAC1BH,WAAW,EACXK,SAAS,CACV;QAED,IAAIC,OAAO,KAAK,IAAI,EAAE;YACpB,MAAM,IAAIC,KAAK,CAAC,kBAAkB,CAAC,CAAA;SACpC;QAED,IAAI3B,2BAA2B,CAACoB,WAAW,EAAEM,OAAO,CAAC,EAAE;YACrD,OAAOzB,iBAAiB,CACtBI,KAAK,EACLM,OAAO,EACPN,KAAK,CAACuB,YAAY,EAClBvB,KAAK,CAACa,OAAO,CAACC,WAAW,CAC1B,CAAA;SACF;QAED,MAAMU,wBAAwB,GAAGpB,oBAAoB,GACjDX,iBAAiB,CAACW,oBAAoB,CAAC,GACvCqB,SAAS;QAEb,IAAID,wBAAwB,EAAE;YAC5BlB,OAAO,CAACiB,YAAY,GAAGC,wBAAwB;SAChD;QAED3B,eAAe,CAACmB,YAAY,EAAEX,KAAK,EAAEY,cAAc,CAAC;QAEpDX,OAAO,CAACH,YAAY,GAAGY,WAAW;QAClCT,OAAO,CAACoB,WAAW,GAAGL,OAAO;QAC7Bf,OAAO,CAACD,KAAK,GAAGA,KAAK;QAErBW,YAAY,GAAGX,KAAK;QACpBU,WAAW,GAAGM,OAAO;KACtB;IAED,OAAOvB,aAAa,CAACE,KAAK,EAAEM,OAAO,CAAC,CAAA;CACrC"}