{"version":3,"sources":["../../../../../src/client/components/router-reducer/reducers/refresh-reducer.ts"],"names":["fetchServerResponse","createRecordFromThenable","readRecordValue","createHrefFromUrl","applyRouterStatePatchToTree","isNavigatingToNewRootLayout","handleExternalUrl","handleMutable","CacheStates","fillLazyItemsTillLeafWithHead","refreshReducer","state","action","cache","mutable","origin","href","canonicalUrl","isForCurrentTree","JSON","stringify","previousTree","tree","data","URL","nextUrl","flightData","canonicalUrlOverride","pushRef","pendingPush","currentTree","flightDataPath","length","console","log","treePatch","newTree","Error","canonicalUrlOverrideHref","undefined","subTreeData","head","slice","status","READY","prefetchCache","Map","patchedTree"],"mappings":"AAAA,SAASA,mBAAmB,QAAQ,0BAA0B,CAAA;AAC9D,SAASC,wBAAwB,QAAQ,gCAAgC,CAAA;AACzE,SAASC,eAAe,QAAQ,sBAAsB,CAAA;AACtD,SAASC,iBAAiB,QAAQ,yBAAyB,CAAA;AAC3D,SAASC,2BAA2B,QAAQ,qCAAqC,CAAA;AACjF,SAASC,2BAA2B,QAAQ,qCAAqC,CAAA;AAMjF,SAASC,iBAAiB,QAAQ,oBAAoB,CAAA;AACtD,SAASC,aAAa,QAAQ,mBAAmB,CAAA;AACjD,SAASC,WAAW,QAAQ,2CAA2C,CAAA;AACvE,SAASC,6BAA6B,QAAQ,wCAAwC,CAAA;AAEtF,OAAO,SAASC,cAAc,CAC5BC,KAA2B,EAC3BC,MAAqB,EACP;IACd,MAAM,EAAEC,KAAK,CAAA,EAAEC,OAAO,CAAA,EAAEC,MAAM,CAAA,EAAE,GAAGH,MAAM;IACzC,MAAMI,IAAI,GAAGL,KAAK,CAACM,YAAY;IAE/B,MAAMC,gBAAgB,GACpBC,IAAI,CAACC,SAAS,CAACN,OAAO,CAACO,YAAY,CAAC,KAAKF,IAAI,CAACC,SAAS,CAACT,KAAK,CAACW,IAAI,CAAC;IAErE,IAAIJ,gBAAgB,EAAE;QACpB,OAAOX,aAAa,CAACI,KAAK,EAAEG,OAAO,CAAC,CAAA;KACrC;IAED,IAAI,CAACD,KAAK,CAACU,IAAI,EAAE;QACf,uDAAuD;QACvD,wCAAwC;QACxCV,KAAK,CAACU,IAAI,GAAGtB,wBAAwB,CACnCD,mBAAmB,CACjB,IAAIwB,GAAG,CAACR,IAAI,EAAED,MAAM,CAAC,EACrB;YAACJ,KAAK,CAACW,IAAI,CAAC,CAAC,CAAC;YAAEX,KAAK,CAACW,IAAI,CAAC,CAAC,CAAC;YAAEX,KAAK,CAACW,IAAI,CAAC,CAAC,CAAC;YAAE,SAAS;SAAC,EACxDX,KAAK,CAACc,OAAO,CACd,CACF;KACF;IACD,MAAM,CAACC,UAAU,EAAEC,oBAAoB,CAAC,GAAGzB,eAAe,CAACW,KAAK,CAACU,IAAI,CAAE;IAEvE,4DAA4D;IAC5D,IAAI,OAAOG,UAAU,KAAK,QAAQ,EAAE;QAClC,OAAOpB,iBAAiB,CACtBK,KAAK,EACLG,OAAO,EACPY,UAAU,EACVf,KAAK,CAACiB,OAAO,CAACC,WAAW,CAC1B,CAAA;KACF;IAED,2DAA2D;IAC3DhB,KAAK,CAACU,IAAI,GAAG,IAAI;IAEjB,IAAIO,WAAW,GAAGnB,KAAK,CAACW,IAAI;IAE5B,KAAK,MAAMS,cAAc,IAAIL,UAAU,CAAE;QACvC,oFAAoF;QACpF,IAAIK,cAAc,CAACC,MAAM,KAAK,CAAC,EAAE;YAC/B,oCAAoC;YACpCC,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;YAC7B,OAAOvB,KAAK,CAAA;SACb;QAED,2GAA2G;QAC3G,MAAM,CAACwB,SAAS,CAAC,GAAGJ,cAAc;QAClC,MAAMK,OAAO,GAAGhC,2BAA2B,CACzC,sBAAsB;QACtB;YAAC,EAAE;SAAC,EACJ0B,WAAW,EACXK,SAAS,CACV;QAED,IAAIC,OAAO,KAAK,IAAI,EAAE;YACpB,MAAM,IAAIC,KAAK,CAAC,kBAAkB,CAAC,CAAA;SACpC;QAED,IAAIhC,2BAA2B,CAACyB,WAAW,EAAEM,OAAO,CAAC,EAAE;YACrD,OAAO9B,iBAAiB,CAACK,KAAK,EAAEG,OAAO,EAAEE,IAAI,EAAEL,KAAK,CAACiB,OAAO,CAACC,WAAW,CAAC,CAAA;SAC1E;QAED,MAAMS,wBAAwB,GAAGX,oBAAoB,GACjDxB,iBAAiB,CAACwB,oBAAoB,CAAC,GACvCY,SAAS;QAEb,IAAIZ,oBAAoB,EAAE;YACxBb,OAAO,CAACG,YAAY,GAAGqB,wBAAwB;SAChD;QAED,0DAA0D;QAC1D,MAAM,CAACE,WAAW,EAAEC,IAAI,CAAC,GAAGV,cAAc,CAACW,KAAK,CAAC,CAAC,CAAC,CAAC;QAEpD,8FAA8F;QAC9F,IAAIF,WAAW,KAAK,IAAI,EAAE;YACxB3B,KAAK,CAAC8B,MAAM,GAAGnC,WAAW,CAACoC,KAAK;YAChC/B,KAAK,CAAC2B,WAAW,GAAGA,WAAW;YAC/B/B,6BAA6B,CAC3BI,KAAK,EACL,4FAA4F;YAC5F0B,SAAS,EACTJ,SAAS,EACTM,IAAI,CACL;YACD3B,OAAO,CAACD,KAAK,GAAGA,KAAK;YACrBC,OAAO,CAAC+B,aAAa,GAAG,IAAIC,GAAG,EAAE;SAClC;QAEDhC,OAAO,CAACO,YAAY,GAAGS,WAAW;QAClChB,OAAO,CAACiC,WAAW,GAAGX,OAAO;QAC7BtB,OAAO,CAACG,YAAY,GAAGD,IAAI;QAE3Bc,WAAW,GAAGM,OAAO;KACtB;IAED,OAAO7B,aAAa,CAACI,KAAK,EAAEG,OAAO,CAAC,CAAA;CACrC"}