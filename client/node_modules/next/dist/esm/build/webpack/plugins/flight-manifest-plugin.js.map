{"version":3,"sources":["../../../../src/build/webpack/plugins/flight-manifest-plugin.ts"],"names":["path","webpack","sources","CLIENT_REFERENCE_MANIFEST","SYSTEM_ENTRYPOINTS","relative","sep","isClientComponentModule","isCSSMod","getProxiedPluginState","traverseModules","nonNullable","WEBPACK_LAYERS","getClientReferenceModuleKey","pluginState","serverModuleIds","edgeServerModuleIds","ASYNC_CLIENT_MODULES","PLUGIN_NAME","ClientReferenceManifestPlugin","dev","constructor","options","appDir","Set","apply","compiler","hooks","compilation","tap","normalModuleFactory","dependencyFactories","set","dependencies","ModuleDependency","dependencyTemplates","NullDependency","Template","make","processAssets","name","stage","Compilation","PROCESS_ASSETS_STAGE_OPTIMIZE_HASH","assets","createAsset","context","manifest","ssrModuleMapping","edgeSSRModuleMapping","cssFiles","clientModules","clientRequestsSet","collectClientRequest","mod","resource","buildInfo","rsc","requests","forEach","r","add","chunkGroups","chunkGroup","recordModule","id","chunkCSS","isCSSModule","layer","appClient","type","_identifier","slice","lastIndexOf","moduleReferences","moduleIdMapping","edgeModuleIdMapping","ssrNamedModuleId","resourceResolveData","startsWith","replace","exportName","chunks","has","exportsInfo","moduleGraph","getExportsInfo","isAsyncModule","cjsExports","map","dep","base","names","filter","flat","getAppPathRequiredChunks","requiredChunk","hash","requiredChunks","esmResource","test","addClientReference","async","edgeExportName","addSSRIdMapping","moduleExportedKeys","exports","exportInfo","provided","key","chunk","chunkModules","chunkGraph","getChunkModulesIterable","files","f","endsWith","modId","getModuleId","anyModule","modules","concatenatedMod","entryCSSFiles","addCSSFilesToEntry","entryName","concat","getFiles","length","getParents","parent","file","json","JSON","stringify","undefined","RawSource"],"mappings":"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"}