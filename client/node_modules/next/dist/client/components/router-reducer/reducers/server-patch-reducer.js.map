{"version":3,"sources":["../../../../../src/client/components/router-reducer/reducers/server-patch-reducer.ts"],"names":["serverPatchReducer","state","action","flightData","previousTree","overrideCanonicalUrl","cache","mutable","isForCurrentTree","JSON","stringify","tree","console","log","handleMutable","handleExternalUrl","pushRef","pendingPush","currentTree","currentCache","flightDataPath","flightSegmentPath","slice","treePatch","newTree","applyRouterStatePatchToTree","Error","isNavigatingToNewRootLayout","canonicalUrl","canonicalUrlOverrideHref","createHrefFromUrl","undefined","applyFlightData","patchedTree"],"mappings":"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"}