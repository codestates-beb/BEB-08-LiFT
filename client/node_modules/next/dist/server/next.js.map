{"version":3,"sources":["../../src/server/next.ts"],"names":["log","loadRequireHook","ServerImpl","getServerImpl","undefined","Promise","resolve","require","default","NextServer","constructor","options","hostname","port","getRequestHandler","req","res","parsedUrl","getTracer","trace","NextServerSpan","requestHandler","getServerRequestHandler","getUpgradeHandler","socket","head","server","getServer","handleUpgrade","apply","setAssetPrefix","assetPrefix","preparedAssetPrefix","logError","args","render","renderToHTML","renderError","renderErrorToHTML","render404","serveStatic","prepare","dev","close","createServer","ServerImplementation","loadConfig","preloadedConfig","PHASE_DEVELOPMENT_SERVER","PHASE_PRODUCTION_SERVER","dir","conf","_renderWorker","serverPromise","then","output","warn","Error","experimental","appDir","useExperimentalReact","experimentalReact","process","env","NEXT_PREBUNDLED_REACT","overrideBuiltInReactPackages","reqHandlerPromise","wrap","bind","typescript","createTSPlugin","NODE_ENV","includes","NON_STANDARD_NODE_ENV","console","module","exports"],"mappings":"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"}